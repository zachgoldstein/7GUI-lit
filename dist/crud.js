import{h as e,T as t,r as s,e as i,n as a}from"./property-87bb8bd7.js";import{c as r}from"./repeat-bd309a28.js";class l{constructor(e){(this.host=e).addController(this),this.names=[]}filterSurname(e){return e?this.names.filter((t=>!!t.surname.toUpperCase().includes(e.toUpperCase()))):this.names}get(e){return this.names.find((t=>t.id==e))}getId(e){const t=this.names.find((t=>t.firstName==e.firstName&&t.surname==e.surname));if(t)return t.id}has(e){return this.names.filter((t=>t.id==e)).length>0}_getUID(){return`${Date.now().toString()}-${Math.floor(1e6*Math.random())}`}create(e){const t={...e,id:this._getUID()};this.names.push(t),this.host.requestUpdate()}update(e){this.has(e.id)&&this.delete(e.id),this.create(e),this.host.requestUpdate()}delete(e){this.names=this.names.filter((t=>t.id!==e)),this.host.requestUpdate()}hostConnected(){this.host.requestUpdate()}hostDisconnected(){this.host.requestUpdate()}}var n=function(e,t,s,i){var a,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,s,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(l=(r<3?a(l):r>3?a(t,s,l):a(t,s))||l);return r>3&&l&&Object.defineProperty(t,s,l),l};let o=class extends e{constructor(){super(),this.crudController=new l(this),this._filter="",this._firstName="",this._surname="",this._displayNames=[],this.crudController.create({firstName:"Hans",surname:"Emil"}),this.crudController.create({firstName:"Max",surname:"Mustermann"}),this.crudController.create({firstName:"Roman",surname:"Tisch"}),this._updateDisplayList()}_sortDisplayNames(){this._displayNames=this._displayNames.sort(((e,t)=>e.surname.localeCompare(t.surname)))}_changeFilterString(e){e&&e.target&&(this._filter=e.target.value,this._updateDisplayList())}_clickCreate(){this.crudController.create({firstName:this._firstName,surname:this._surname}),this._updateDisplayList()}_clickUpdate(){this._selectedName?this.crudController.update({id:this._selectedName.id,firstName:this._firstName,surname:this._surname}):this.crudController.create({firstName:this._firstName,surname:this._surname}),this._updateDisplayList()}_clickDelete(){this._selectedName&&this.crudController.delete(this._selectedName.id),this._updateDisplayList()}_updateDisplayList(){this._displayNames=this.crudController.filterSurname(this._filter),this._sortDisplayNames()}_selectName(e){if(!e||!e.target)return;const t=e.target.value,s=this.crudController.get(t);s&&(this._selectedName=s,this._firstName=s.firstName,this._surname=s.surname)}_changeFirstName(e){e&&e.target&&(this._firstName=e.target.value)}_changeSurname(e){e&&e.target&&(this._surname=e.target.value)}render(){return t`<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css"><div class="box"><label class="is-size-5" for="filter">Filter Surname:</label> <input type="search" id="filter" name="filter" class="input" .value="${this._filter}" @input="${this._changeFilterString}"><br><label class="is-size-5" for="name-select">Choose a Name:</label> <select name="name-select" id="name-select" size="5" @change="${this._selectName}">${r(this._displayNames,(e=>e.surname),(e=>t`<option value="${e.id}">${e.surname}, ${e.firstName}</option>`))}</select><br><label class="is-size-5" for="first-name">First Name</label> <input type="text" id="first-name" name="first-name" class="input" .value="${this._firstName}" @input="${this._changeFirstName}"><br><label class="is-size-5" for="surname">Surname</label> <input type="text" id="surname" name="surname" class="input" .value="${this._surname}" @input="${this._changeSurname}"><br><button class="button" @click="${this._clickCreate}">Create</button> <button class="button" @click="${this._clickUpdate}">Update</button> <button class="button" @click="${this._clickDelete}">Delete</button></div>`}};o.styles=s`.invalid{background:coral}`,n([i()],o.prototype,"_filter",void 0),n([i()],o.prototype,"_firstName",void 0),n([i()],o.prototype,"_surname",void 0),n([i()],o.prototype,"_displayNames",void 0),o=n([a("seven-gui-crud")],o);export{o as CRUD};
