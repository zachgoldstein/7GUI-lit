import{h as t,T as e,r as i,n as s}from"./property-87bb8bd7.js";import{r}from"./state-13a58fab.js";class a{constructor(t,e=1e3,i=20){this.startTime=0,this.elapsedTime=0,this.duration=1e3,this.frequency=20,(this.host=t).addController(this),this.duration=e,this.frequency=i}get fractionElapsed(){return this.elapsedTime/this.duration}setDuration(t){this.duration=t,this.reset()}reset(){this._timerStop(),this._timerStart()}_timerStart(){this.startTime=Date.now(),this.elapsedTime=0,this._timerID&&this._timerStop(),this._timerID=window.setInterval(this._timerInterval.bind(this),this.frequency)}_timerInterval(){this.elapsedTime=Date.now()-this.startTime,this.elapsedTime>this.duration?this._timerStop():this.host.requestUpdate()}_timerStop(){clearInterval(this._timerID),this._timerID=void 0,this.host.requestUpdate()}hostConnected(){this._timerStart()}hostDisconnected(){this._timerStop()}}var n=function(t,e,i,s){var r,a=arguments.length,n=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(n=(a<3?r(n):a>3?r(e,i,n):r(e,i))||n);return a>3&&n&&Object.defineProperty(e,i,n),n};let o=class extends t{constructor(){super(...arguments),this.timer=new a(this,1e4),this.startTimestamp=16360848e5}_reset(){this.timer.reset()}_changeDuration(t){t&&t.target&&this.timer.setDuration(parseInt(t.target.value))}render(){return e`<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css"><div class="box"><label class="is-size-5" for="elapsed-time">Elapsed Time</label><progress class="progress" id="elapsed-time" max="${this.timer.duration}" value="${this.timer.elapsedTime}">${this.timer.fractionElapsed.toFixed(2)}%</progress><span class="is-size-5">Remaining Time: ${this.timer.elapsedTime/1e3}s</span><br><label class="is-size-5" for="duration">Duration: ${this.timer.duration/1e3}s</label> <input type="range" id="duration" name="duration" min="0" max="10000" @input="${this._changeDuration}"><br><button class="button" @click="${this._reset}">Reset</button></div>`}};o.styles=i`.invalid{background:coral}`,n([r()],o.prototype,"startTimestamp",void 0),o=n([s("seven-gui-timer")],o);export{o as Timer};
